////////////////////////////////////////////////////////////////////////////////
// Copyright (c) 2025 Dimitry Ishenko
// Contact: dimitry (dot) ishenko (at) (gee) mail (dot) com
//
// Distributed under the GNU GPL license. See the LICENSE.md file for details.

////////////////////////////////////////////////////////////////////////////////
#ifndef JACK_PARAM_HPP
#define JACK_PARAM_HPP

////////////////////////////////////////////////////////////////////////////////
#include <string>
#include <variant>

struct jackctl_parameter;
struct _JSList;
using jack_list = _JSList;

////////////////////////////////////////////////////////////////////////////////
namespace jack
{

////////////////////////////////////////////////////////////////////////////////
using value = std::variant<
    int,
    unsigned,
    char,
    std::string,
    bool
>;

////////////////////////////////////////////////////////////////////////////////
class param
{
public:
    ////////////////////
    param() = default;

    void set(const jack::value&);
    jack::value get() const;

    template<typename T>
    auto get_as() const { return std::get<T>(get()); }

    static param from_list(const jack_list*, const std::string& name);

private:
    ////////////////////
    jackctl_parameter* param_;
    explicit param(jackctl_parameter*);
};

////////////////////////////////////////////////////////////////////////////////
}

////////////////////////////////////////////////////////////////////////////////
#endif
